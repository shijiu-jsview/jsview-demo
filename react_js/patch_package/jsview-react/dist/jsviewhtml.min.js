!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";console.log("Define originDocument ..."),window.originDocument={},window.originDocument.createElement=window.document.createElement.bind(window.document),window.originDocument.createTextNode=window.document.createTextNode.bind(window.document),window.originDocument.getElementById=window.document.getElementById.bind(window.document),window.originDocument.querySelector=window.document.querySelector.bind(window.document),window.originDocument.createEvent=window.document.createEvent.bind(window.document),window.originDocument.dispatchEvent=window.document.dispatchEvent.bind(window.document),void 0===window.Forge&&(window.Forge={});var h=window.Forge;function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(r){return function(){var e,t,i,n=a(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()){var s=a(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return t=this,!(i=e)||"object"!=typeof i&&"function"!=typeof i?l(t):i}}function u(e,t,i){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(i):s.value}})(e,t,i||e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function w(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return d(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(e,t):void 0}}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s,r=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}var f=function(){function u(e,t){if(v(this,u),this.href="",this.origin="",this.protocol="",this.host="",this.hostname="",this.port="",this.pathname="",this.search="",this.hash="",e){if(!0===e.startsWith("url")){var i=e.indexOf("(")+1,n=e.lastIndexOf(")");e=e.substring(i,n).trim()}if(!0!==e.startsWith("data:")){if(!0===e.startsWith("/")&&(e=document.location.origin+e),!0===e.startsWith("./")&&void 0!==window.JsView&&void 0!==window.JsView.React.JsSubPath){if(void 0===window.JsView.React.__MainPath||"undefined"===window.JsView.React.__MainPathRef||window.JsView.React.__MainPathRef!==document.location.href){window.JsView.React.JsSubPath.startsWith("/")||(window.JsView.React.JsSubPath="/"+window.JsView.React.JsSubPath),window.JsView.React.JsSubPath.endsWith("/")||(window.JsView.React.JsSubPath=window.JsView.React.JsSubPath+"/"),window.JsView.React.__MainPathRef=document.location.href;var s=document.location.pathname.lastIndexOf(window.JsView.React.JsSubPath);window.JsView.React.__MainPath=document.location.origin+document.location.pathname.substring(0,s)}e=window.JsView.React.__MainPath+e.substring(1),console.log("TestUrl "+window.JsView.React.__MainPath+" origin="+e)}if(this.href=e,t){var r=this.href,o=r.indexOf("#");0<o&&(this.hash=r.substring(o),r=r.substring(0,o));var a=r.indexOf("?");1<a&&(this.search=r.substring(a),r=r.substring(0,a));var l=r,c=l.indexOf("://");this.protocol=0<c?l.substring(0,c+1):"";var h=1<c?l.substring(c+3):"";c=h.indexOf("/"),this.host=0<c?h.substring(0,c):"",this.pathname=1<c?h.substring(c):"",this.origin=0<c?this.protocol+"//"+this.host:"",c=this.host.indexOf(":"),this.hostname=0<c?this.host.substring(0,c):"",this.port=1<c?this.host.substring(c+1):""}}else this.href=e}}return r(u,[{key:"replace",value:function(e){this.href=e}}]),u}(),y=function(){function c(){v(this,c)}return r(c,null,[{key:"SetBackgroundColor",value:function(e,t,i){var n,s=c.TextureManager.GetColorTexture(t);i&&(n=new h.ViewRoundCornerMask(i.topLeft,i.topRight,i.bottomLeft,i.bottomRight));var r=new h.TextureSetting(s,n);e.ResetTexture(r)}},{key:"SetBackgroundImage",value:function(e,t,i,n,s,r){if("string"==typeof t&&(t=new f(t)),t instanceof f==!1)throw Error("Bad Argument.",t);var o,a;o=t.href.endsWith("gif")||t.href.endsWith("webp")?c.TextureManager.GetGifImage(t.href):c.TextureManager.GetImage2(t.href,!1,s,r||h.ColorSpace.RGBA_8888),i&&(a=new h.ViewRoundCornerMask(i.topLeft,i.topRight,i.bottomLeft,i.bottomRight));var l=new h.ExternalTextureSetting(o,a);e.ResetTexture(l),n&&o.RegisterLoadImageCallback(null,function(){n({width:o.Width,height:o.Height})})}},{key:"SetVideoTexture",value:function(e,t,i){var n,s=c.TextureManager.GetColorTexture(t);i&&(n=new h.ViewRoundCornerMask(i.topLeft,i.topRight,i.bottomLeft,i.bottomRight));var r=new h.TextureSetting(s,n);e.ResetTexture(r)}},{key:"GetTextWidth",value:function(e){return e.str||(e.str=""),e.font||(e.font=h.TextUtils._sDefaultFont),e.size||(e.size=h.TextUtils._sDefaultFontSize),"italic"!==e.italic&&(e.italic=""),"bold"!==e.bold&&(e.bold=""),window.PlatformUtils.GetTextWidth(e)}},{key:"RequestSwap",value:function(){h.sRenderBridge.RequestSwap()}},{key:"SetImgTexSize",value:function(e,t){var i={size:t,refNum:0};c.TextureInfo.Cache[e.Source]=i}},{key:"RefImgTexSize",value:function(n,s){var e=c.TextureInfo.Cache[n.Source];e?(0<e.refNum?e.refNum++:e.refNum=1,s(e.size)):n.RegisterLoadImageCallback(null,function(){var e={width:n.Width,height:n.Height};s(e);var t=c.TextureInfo.Cache[n.Source];if(t)0<t.refNum?t.refNum++:t.refNum=1;else{var i={size:e,refNum:1};c.TextureInfo.Cache[n.Source]=i}})}},{key:"UnrefImgTexSize",value:function(e){if(e){var t=c.TextureInfo.Cache[e.Source];t&&(t.refNum--,t.refNum<=0&&c.TextureInfo.Unused.add(e.Source))}}},{key:"ClearUnusedTexSize",value:function(){var e,t=w(c.TextureInfo.Unused);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=c.TextureInfo.Cache[i];n.refNum<-2?(delete c.TextureInfo.Cache[i],c.TextureInfo.Unused.delete(i)):n.refNum<=0?n.refNum--:c.TextureInfo.Unused.delete(i)}}catch(e){t.e(e)}finally{t.f()}}}]),c}();y.TextureInfo={Cache:{},Unused:new Set},y.TextureManager=null,y.RootView=null,y.RootActivity=null,y.HaltKeyEvent=!1;var s=function(){function t(e){v(this,t),this.target=null,this.timeStamp=Date.now(),this.type=e}return r(t,[{key:"initEvent",value:function(e){this.type=e}}]),t}(),p={cnt:0},g=function(){function i(e){v(this,i),this.type=e,this.cachedValues=null,this.onSyncCallback=null}return r(i,[{key:"setOnSyncCallback",value:function(e){this.onSyncCallback=e,this.syncLastCaches(!0)}},{key:"setCacheProperty",value:function(e,t){this.cachedValues||(this.cachedValues={}),this.cachedValues[e]=t,this.syncLastCaches(!1),y.RequestSwap()}},{key:"syncLastCaches",value:function(e){var t=i.LastModified[this.type];!e&&t===this||(i.LastModified[this.type]=this,t&&t.cachedValues&&"function"==typeof t.onSyncCallback&&(t.onSyncCallback(t.cachedValues),t.cachedValues=null))}}],[{key:"SyncAllCachedProperty",value:function(){for(var e=0,t=Object.values(i.LastModified);e<t.length;e++){t[e].syncLastCaches(!0)}p.cnt=(p.cnt+1)%65535}}]),i}();g.LastModified={},window.JsView&&(window.JsView.React={DesignMap:null,Render:null,Extension:y,UrlRef:f},window.JsView.Vue=window.JsView.React);var m=function(){function t(e){v(this,t),this.ownerDocument=window.document,this.nodeType=e,this.parentNode=null,this.jsvEventListener=null}return r(t,[{key:"appendChild",value:function(e){e.parentNode=this}},{key:"removeChild",value:function(e){e.parentNode=null}},{key:"insertBefore",value:function(e){e.parentNode=this}},{key:"addEventListener",value:function(e,t){this.jsvEventListener||(this.jsvEventListener={});var i=this.jsvEventListener[e];i||(i=new Set,this.jsvEventListener[e]=i),i.add(t)}},{key:"removeEventListener",value:function(e,t){if(this.jsvEventListener){var i=this.jsvEventListener[e];i&&(i.delete(t),i.size<=0&&this.jsvEventListener.hasOwnProperty(e)&&delete this.jsvEventListener[e],0===Object.values(this.jsvEventListener).length&&(this.jsvEventListener=null))}}},{key:"dispatchEvent",value:function(e){if(this.jsvEventListener){var t=this.jsvEventListener[e.type];if(t){e.target||(e.target=document.activeElement);var i,n=w(t);try{for(n.s();!(i=n.n()).done;){(0,i.value)(e)}}catch(e){n.e(e)}finally{n.f()}}else console.warn("Node.dispatchEvent() Ignore to dispatch event: "+e.type+". No listener added.")}else console.warn("Node.dispatchEvent() Ignore to dispatch event: "+e.type+". No event added.")}}]),t}();m.ELEMENT_NODE=1,m.TEXT_NODE=3,m.DOCUMENT_NODE=9;var j=function(){o(t,s);var e=c(t);function t(){return v(this,t),e.apply(this,arguments)}return t}();j.Type={FOCUS:"focus",BLUR:"blur"};function k(e){if(v(this,k),this.top=null,this.right=null,this.bottom=null,this.left=null,e&&!1!==e.startsWith("inset")){var t=e.indexOf("(")+1,i=e.substring(t),n=S.ConvertRect(i);this.top=n.top,this.right=n.right,this.bottom=n.bottom,this.left=n.left}else console.error("Inset.Parse() InvalidArgs: value=",e)}function O(e){if(v(this,O),this.source=null,this.slice=null,this.repeat=null,this.outset=null,this.width=null,e){var t=e.indexOf(")")+1,i=e.substring(0,t),n=e.substring(t);this.source=new f(i),this.slice=S.ConvertRect(n)}else console.error("BorderImage.constructor() InvalidArgs: value=",e)}var b=function(){o(t,s);var e=c(t);function t(){return v(this,t),e.apply(this,arguments)}return t}(),S=function(){function p(){v(this,p)}return r(p,null,[{key:"ConvertFloat",value:function(e){return!e||"string"!=typeof e?e:parseFloat(e)}},{key:"ConvertPx",value:function(e){return!e||"string"!=typeof e?e:"0"===e?0:e.endsWith("px")?parseInt(e):e}},{key:"ConvertRect",value:function(e){var t=p.SplitString(e," "),i={top:0<t.length?parseInt(t[0]):0,right:1<t.length?parseInt(t[1]):null,bottom:2<t.length?parseInt(t[2]):null,left:3<t.length?parseInt(t[3]):null};return i.right=i.right||0===i.right?i.right:i.top,i.bottom=i.bottom||0===i.bottom?i.bottom:i.top,i.left=i.left||0===i.left?i.left:i.right,i}},{key:"ConvertCorner",value:function(e){var t=p.SplitString(e," "),i={topLeft:0<t.length?parseInt(t[0]):0,topRight:1<t.length?parseInt(t[1]):null,bottomRight:2<t.length?parseInt(t[2]):null,bottomLeft:3<t.length?parseInt(t[3]):null};return i.topRight=i.topRight||0===i.topRight?i.topRight:i.topLeft,i.bottomRight=i.bottomRight||0===i.bottomRight?i.bottomRight:i.topLeft,i.bottomLeft=i.bottomLeft||0===i.bottomLeft?i.bottomLeft:i.bottomRight,i}},{key:"ConvertSize",value:function(e){var t=p.SplitString(e," "),i={width:0<t.length?parseInt(t[0]):0,height:1<t.length?parseInt(t[1]):null};return i.height=i.height||0===i.height?i.height:i.width,i}},{key:"ConvertAnimation",value:function(e){if(null===e||0===e.length)return null;var t=e.indexOf("cubic-bezier"),i=[];if(0<=t){var n,s=e.indexOf(")"),r=e.substring(t,s+1),o=w(p.SplitString(e,r));try{for(o.s();!(n=o.n()).done;){var a=n.value,l=p.SplitString(a," ");i=i.concat(l)}}catch(e){o.e(e)}finally{o.f()}i.push(r)}else i=p.SplitString(e," ");for(var c=null,h=0,u=1,v=e.includes("alternate"),d=2;d<i.length;d++)if("infinite"!==i[d]){var f=p.ConvertTimeMs(i[d]);!1===isNaN(f)?h=f:(f=parseFloat(i[d]),!1===isNaN(f)?u=f:c=i[d])}else u=-1;var y=1<i.length?p.ConvertTimeMs(i[1]):0;return{name:0<i.length?i[0]:"",duration:y,timingFunction:p.ConvertEasing(c,y),delay:h,iterationCount:u,direction:v}}},{key:"ConvertTransition",value:function(e){if(null==e||0==e.length)return null;for(var t={},i=new Array,n=e.split(","),s=0;s<n.length;s++)if(0<=n[s].indexOf("(")){for(var r=s;r<n.length&&n[r].indexOf(")")<0;)r++;for(var o="",a=s;a<=r;a++)a!=s&&(o+=","),o+=n[a];s=r,i=i.concat(o)}else i=i.concat(n[s]);var l,c=w(i);try{for(c.s();!(l=c.n()).done;){var h=l.value,u=p.ConvertAnimation(h);if("all"==(t[u.name]=u).name)for(var v=new Array("opacity","left","top","width","height","transform"),d=0,f=v;d<f.length;d++){t[f[d]]=u}}}catch(e){c.e(e)}finally{c.f()}return t}},{key:"ConvertTimeMs",value:function(e){var t=NaN;return(e=(e=e||"").trim()).endsWith("ms")?t=1:e.endsWith("s")&&(t=1e3),t*=parseFloat(e)}},{key:"ConvertEasing",value:function(e,t){var i=h.Easing.Circular.InOut;if(!e)return i;if(e.includes("ease"))i=e.includes("-in-out")?h.Easing.Circular.InOut:e.includes("-out")?h.Easing.Circular.Out:e.includes("-in")?h.Easing.Circular.In:h.Easing.Circular.InOut;else if(e.includes("linear"))i=null;else if(e.includes("cubic-bezier")){var n=p.ConvertBezier(e);i=new h.BezierEasing(n.x1,n.y1,n.x2,n.y2,t)}else if(e.includes("steps")){var s=p.ConvertSteps(e);i=new h.StepsEasing(s.steps,s.type)}return i}},{key:"ConvertBezier",value:function(e){var t=e.indexOf("(");0<=t&&(e=e.substring(t+1));var i=p.SplitString(e,",");return{x1:0<i.length?parseFloat(i[0]):0,y1:1<i.length?parseFloat(i[1]):0,x2:2<i.length?parseFloat(i[2]):0,y2:3<i.length?parseFloat(i[3]):0}}},{key:"ConvertSteps",value:function(e){var t=e.indexOf("(");0<=t&&(e=e.substring(t+1));var i=p.SplitString(e,",");return{steps:0<i.length?parseInt(i[0]):1,type:!(1<i.length)||i[1].includes("start")?0:1}}},{key:"ConvertOverflow",value:function(e,t){return e&&!e.includes("visible")?t.HIDDEN:t.VISIBLE}},{key:"ConvertObjectFit",value:function(e,t){return(e=e||"").includes("fill")?t.FILL:e.includes("contain")?t.CONTAIN:e.includes("cover")?t.COVER:e.includes("none")?t.NONE:e.includes("scale-down")?t.SCALEDOWN:t.CONTAIN}},{key:"SplitString",value:function(e,t){var i=(e=e||"").trim().split(t);if(" "!==t)return i;var n,s=[],r=w(i);try{for(r.s();!(n=r.n()).done;){var o=n.value;o&&s.push(o)}}catch(e){r.e(e)}finally{r.f()}return s}}]),p}(),C=new Set(["textOverflow","wordWrap","textShadow","fontSize","lineHeight","color","fontFamily","fontStyle","fontWeight","textAlign"]),E=function(){function n(){v(this,n),this.jsvStore={},this.jsvLazySyncCache=new g("style"),this.jsvLockedProps={},this.jsvTextClassRef=null}return r(n,[{key:"setProperty",value:function(e,t){"function"==typeof document.jsvCheckStyleFormat&&document.jsvCheckStyleFormat(e,t),this.jsvLockedProps[e]=!0,t=this.jsvConvertPropValue(e,t),this._JsvUpdateProperty(e,t)}},{key:"_JsvUpdateProperty",value:function(e,t){if(this.jsvStore[e]!==t){this.jsvStore[e]=t;var i=n.JsvGetStyleType(e);this.jsvLazySyncCache.setCacheProperty(i,void 0)}}},{key:"getPropertyValue",value:function(e){return this.jsvStore[e]}},{key:"setDefaultValueBeforeForgeViewLoad",value:function(e,t){this.jsvStore[e]=t}},{key:"jsvApplyClasses",value:function(e){if(e){var t,i={},n=w(e.split(" "));try{for(n.s();!(t=n.n()).done;){var s=t.value;if(h.ReactUtils.StyleClassMap.hasOwnProperty(s)){var r=h.ReactUtils.StyleClassMap[s],o=r.getAttach();if(null==o){var a=r.getStyles();for(var l in o={altStyles:{}},a)o.altStyles[l]=this.jsvConvertPropValue(l,a[l]);r.updateAttach(o)}Object.assign(i,o.altStyles),"text"===r.classType()&&(this.jsvTextClassRef=r)}}}catch(e){n.e(e)}finally{n.f()}for(var c in i)this.jsvLockedProps[c]||this._JsvUpdateProperty(c,i[c])}}},{key:"jsvSaveTextCachedSet",value:function(e){var t=this.jsvTextClassRef.getAttach();t.cachedSet=e;var i,n={},s=w(C);try{for(s.s();!(i=s.n()).done;){var r=i.value;this.jsvStore.hasOwnProperty(r)?n[r]=this.jsvStore[r]:n[r]=void 0}}catch(e){s.e(e)}finally{s.f()}t.majorStyles=n}},{key:"jsvCheckTextStyleChange",value:function(){var e=this.jsvTextClassRef.getAttach();if(!e.hasOwnProperty("cachedSet"))return!1;for(var t in e.majorStyles)if(e.majorStyles[t]!==this.jsvStore[t])return this.jsvTextClassRef.fallbackMode(t),!1;return!0}},{key:"jsvSetChangedListener",value:function(s){this.jsvLazySyncCache.setOnSyncCallback(function(e){for(var t={},i=0,n=Object.keys(e);i<n.length;i++){t[n[i]]=!0}s(t)})}},{key:"jsvConvertPropValue",value:function(e,t){switch(e){case n.PROP.VISIBILITY:case n.PROP.DISPLAY:return t.toUpperCase();case n.PROP.OVERFLOW:return S.ConvertOverflow(t,n.Overflow);case n.PROP.OBJECTFIT:return S.ConvertObjectFit(t,n.ObjectFit);case n.PROP.TRANSFORM:case n.PROP.TRANSFORMORIGIN:return t;case n.PROP.CLIPPATH:return new k(t);case n.PROP.BORDERIMAGE:return new O(t);case n.PROP.BORDERIMAGEWIDTH:case n.PROP.BORDERIMAGEOUTSET:return S.ConvertRect(t);case n.PROP.BORDERRADIUS:return S.ConvertCorner(t);case n.PROP.ANIMATION:return S.ConvertAnimation(t);case n.PROP.TRANSITION:return S.ConvertTransition(t);case n.PROP.OPACITY:return S.ConvertFloat(t);default:return S.ConvertPx(t)}}}],[{key:"JsvGetStyleType",value:function(e){switch(e){case n.PROP.LEFT:case n.PROP.RIGHT:case n.PROP.TOP:case n.PROP.BOTTOM:case n.PROP.ZINDEX:return n.TYPE.LAYOUT_POS;case n.PROP.WIDTH:case n.PROP.HEIGHT:case n.PROP.VISIBILITY:case n.PROP.DISPLAY:case n.PROP.CLIPPATH:case n.PROP.OVERFLOW:case n.PROP.OBJECTFIT:case n.PROP.TRANSFORM:case n.PROP.TRANSFORMORIGIN:case n.PROP.PERSPECTIVE:case n.PROP.PERSPECTIVEORIGIN:case n.PROP.BACKFACEVISIBILITY:case n.PROP.TRANSFORMSTYLE:return n.TYPE.LAYOUT_SIZE;case n.PROP.BACKGROUNDCOLOR:case n.PROP.BACKGROUNDIMAGE:case n.PROP.BORDERRADIUS:return n.TYPE.BACKGROUND;case n.PROP.COLOR:case n.PROP.LINEHEIGHT:case n.PROP.WHITESPACE:case n.PROP.FONTFAMILY:case n.PROP.FONTSIZE:case n.PROP.FONTSTYLE:case n.PROP.FONTWEIGHT:case n.PROP.TEXTALIGN:case n.PROP.TEXTSHADOW:case n.PROP.TEXTOVERFLOW:return n.TYPE.FOREGROUND;case n.PROP.BORDERIMAGE:case n.PROP.BORDERIMAGEWIDTH:case n.PROP.BORDERIMAGEOUTSET:return n.TYPE.BORDER;case n.PROP.ANIMATION:return n.TYPE.ANIMATION;case n.PROP.TRANSITION:return n.TYPE.TRANSITION;case n.PROP.OPACITY:break;default:return console.warn("Unknown style type for: "+e),null}}}]),n}();E.TYPE={LAYOUT_POS:"layout-position",LAYOUT_SIZE:"layout-size",FOREGROUND:"foreground",BACKGROUND:"background",BORDER:"border",ANIMATION:"animation",TRANSITION:"transition"},E.Overflow={HIDDEN:Symbol("hidden"),VISIBLE:Symbol("visible")},E.ObjectFit={FILL:Symbol("fill"),CONTAIN:Symbol("contain"),COVER:Symbol("cover"),NONE:Symbol("none"),SCALEDOWN:Symbol("scale-down")},E.PROP={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",WIDTH:"width",HEIGHT:"height",VISIBILITY:"visibility",DISPLAY:"display",BACKFACEVISIBILITY:"backfaceVisibility",CLIPPATH:"clipPath",OVERFLOW:"overflow",OBJECTFIT:"objectFit",TRANSFORM:"transform",TRANSFORMORIGIN:"transformOrigin",PERSPECTIVE:"perspective",PERSPECTIVEORIGIN:"perspectiveOrigin",ZINDEX:"zIndex",TRANSFORMSTYLE:"transformStyle",BACKGROUNDCOLOR:"backgroundColor",BACKGROUNDIMAGE:"backgroundImage",BORDERRADIUS:"borderRadius",COLOR:"color",LINEHEIGHT:"lineHeight",WHITESPACE:"whiteSpace",FONTFAMILY:"fontFamily",FONTSIZE:"fontSize",FONTSTYLE:"fontStyle",FONTWEIGHT:"fontWeight",TEXTALIGN:"textAlign",TEXTSHADOW:"textShadow",TEXTOVERFLOW:"textOverflow",BORDERIMAGE:"borderImage",BORDERIMAGEWIDTH:"borderImageWidth",BORDERIMAGEOUTSET:"borderImageOutset",ANIMATION:"animation",TRANSITION:"transition",OPACITY:"opacity"};function e(e){var t=E.PROP[e];Object.defineProperty(E.prototype,t,{set:function(e){this.setProperty(t,e)},get:function(){return this.getPropertyValue(t)}})}for(var t in E.PROP)e(t);var T=null,R=function(){function e(){v(this,e)}return r(e,null,[{key:"reactEventHandlers",value:function(e){return null==T&&this._getReactToken(e),e["__reactEventHandlers$"+T]}},{key:"reactInternalInstance",value:function(e){return null==T&&this._getReactToken(e),e["__reactInternalInstance$"+T]}},{key:"_getReactToken",value:function(e){for(var t in e)if(0<=t.indexOf("__reactEventHandlers")||0<=t.indexOf("__reactInternalInstance")){var i=t.indexOf("$");T=t.substring(i+1);break}}}]),e}(),I=0,x=function(){o(n,m);var i=c(n);function n(e){var t;return v(this,n),(t=i.call(this,m.ELEMENT_NODE)).parentElement=null,t.tagName=t.constructor.name.replace("Element","").toUpperCase(),t._Count=I++,t.childElementCount=0,t.childNodes=new Set,t.firstElementChild=null,t.lastElementChild=null,t.tagName===n.TAG.STYLE?(t.style=null,t.jsvMainView=null):(t.style=new E,t.jsvMainView=new h.LayoutView),t.jsvMaskView=null,t.jsvAnimation=null,t.jsvStore={transition:null,transitionTmp:null,textContent:null,clientWidth:NaN,clientHeight:NaN,textureWidth:NaN,textureHeight:NaN},t.jsvLazySyncCache=new g("element"),t.instantSwapCallback=null,t.reactEventHandlers=null,t.reactInternalInstance=null,t}return r(n,[{key:"appendChild",value:function(e){if(u(a(n.prototype),"appendChild",this).call(this,e),(e.parentElement=this).firstElementChild||(this.firstElementChild=e),this.lastElementChild=e,this.childNodes.add(e),this.childElementCount++,e.nodeType===m.ELEMENT_NODE&&e.tagName!==n.TAG.STYLE){if(!1===document.jsvIsReady)return void console.warn("Element.appendChild() Failed to append child to Forge. jsvIsReady="+document.jsvIsReady);e.jsvOnLoadForgeView(),e.style.jsvSetChangedListener(e.jsvOnStyleChanged.bind(e));var t=e.jsvMaskView.GetLayoutParams();this.jsvMainView.AddView(e.jsvMaskView,t)}}},{key:"removeChild",value:function(e){u(a(n.prototype),"removeChild",this).call(this,e),e.parentElement=null,this.childNodes.delete(e),this.childElementCount--,0==this.childElementCount&&(this.firstElementChild=null,this.lastElementChild=null),e instanceof n&&(e.jsvOnUnloadForgeView(),this.jsvMainView.RemoveView(e.jsvMaskView))}},{key:"insertBefore",value:function(e,t){u(a(n.prototype),"appendChild",this).call(this,e,t),(e.parentElement=this).appendChild(e)}},{key:"setAttribute",value:function(e,t){this[e];this[e]=t,"class"===e?this.style.jsvApplyClasses(t):e.startsWith(n.ATTRIBUTE.JSVPREFIX)&&this.jsvLazySyncCache.setCacheProperty(e,t)}},{key:"removeAttribute",value:function(e){this[e]=void 0,e.startsWith(n.ATTRIBUTE.JSVPREFIX)&&this.jsvLazySyncCache.setCacheProperty(e,void 0)}},{key:"getAttribute",value:function(e){return this[e]}},{key:"hasAttribute",value:function(e){return console.log("Element.hasAttribute() name="+e),!!this[e]}},{key:"focus",value:function(){console.log("Element.focus()"),document.activeElement&&document.activeElement.onfocus();var e=document.activeElement;if(document.activeElement=this,e){var t=new j(j.Type.BLUR);t.target=e,document.dispatchEvent(t)}var i=new j(j.Type.FOCUS);document.dispatchEvent(i)}},{key:"jsvOnLoadForgeView",value:function(){var t=this;if(this.style.clipPath||this.style.overflow||this.style.objectFit){if(this.jsvMaskView)throw Error("React: jsvMaskView is conflicting.");this.jsvMaskView=new h.ClipView}else this.jsvMaskView||(this.jsvMaskView=this.jsvMainView);this.jsvMaskView!==this.jsvMainView&&this.jsvMaskView.AddView(this.jsvMainView),this.jsvLazySyncCache.setOnSyncCallback(function(e){t.jsvMainView.SetElementProp(e,y.RootActivity)})}},{key:"jsvOnUnloadForgeView",value:function(){this.jsvMainView&&this.jsvMainView.ClearViews()}},{key:"jsvOnStyleChanged",value:function(e){var t=!!e[E.TYPE.LAYOUT_SIZE],i=!1;e[E.TYPE.LAYOUT_POS]&&(t||(this.jsvFlushViewLayout(),i=!0)),e[E.TYPE.LAYOUT_SIZE]&&(this.jsvFlushViewLayout(),i=!0),e[E.TYPE.BACKGROUND]&&this.jsvFlushViewBackground(),e[E.TYPE.ANIMATION]&&this.jsvFlushViewAnimation(),e[E.TYPE.TRANSITION]&&!i&&this.jsvFlushViewTransition(),this.jsvFlushEventHandlers()}},{key:"jsvFlushEventHandlers",value:function(){null===this.reactEventHandlers&&(this.reactEventHandlers=R.reactEventHandlers(this),this.reactEventHandlers&&this.reactEventHandlers.onClick&&this.jsvMainView&&this.jsvMainView.EnableDivTouch(this,null))}},{key:"jsvApplyObjectFit",value:function(){return null}},{key:"jsvFlushViewLayout",value:function(){if(!(this.style.clipPath||this.style.overflow||this.style.objectFit)||this.jsvMaskView){var e={x:isNaN(this.style.left)?0:this.style.left,y:isNaN(this.style.top)?0:this.style.top,width:isNaN(this.style.width)?0:this.style.width,height:isNaN(this.style.height)?0:this.style.height},t=null;if(this.style.objectFit&&(t=this.jsvApplyObjectFit(e),this.style.objectFit===E.ObjectFit.FILL&&(t=null)),this.jsvMaskView.ResetCssTransform(this.style.transform,this.style.transformOrigin),this.style.perspective&&0<this.style.perspective){var i=this.style.perspectiveOrigin?this.style.perspectiveOrigin:null;this.jsvMainView.SetPerspective(this.style.perspective,i)}if(this.style.backfaceVisibility&&this.jsvMainView.SetBackfaceVisibility("visible"==this.style.backfaceVisibility),this.style.transformStyle&&this.jsvMainView.SetTransformStyle(this.style.transformStyle),this.jsvMaskView.ResetLayoutParams({x:e.x,y:e.y,width:this.clientWidth,height:this.clientHeight}),this.jsvMaskView!==this.jsvMainView){var n={x:0,y:0,width:this.jsvMaskView.LayoutParams.Width,height:this.jsvMaskView.LayoutParams.Height};this.jsvMainView.ResetLayoutParams(n)}this.jsvMaskView.SetVisibility(this.style.visibility);var s=null;null!==t&&window.JsView&&(s={x:t.x,y:t.y,width:t.width,height:t.height}),this.style.clipPath?s={x:this.style.clipPath.left,y:this.style.clipPath.top,width:this.jsvMaskView.LayoutParams.Width-this.style.clipPath.left-this.style.clipPath.right,height:this.jsvMaskView.LayoutParams.Height-this.style.clipPath.top-this.style.clipPath.bottom}:this.style.overflow===E.Overflow.HIDDEN&&null===this.jsvStore.textContent&&(s={x:0,y:0,width:this.style.width,height:this.style.height}),s?this.jsvMaskView.SetClipRect(s.x,s.y,s.width,s.height,!0):this.jsvMaskView instanceof h.ClipView&&this.jsvMaskView.SetClipRect(0,0,0,0,!1),void 0!==this.style.zIndex&&null!==this.style.zIndex&&this.jsvMaskView.SetZIndex(this.style.zIndex),this.jsvFlushViewTransition()}else console.error("Element.jsvFlushViewLayout() InvalidOpt: clippath=",this.style.clipPath)}},{key:"jsvFlushViewBackground",value:function(){this.style.backgroundColor&&(this.jsvStore.textureWidth=NaN,this.jsvStore.textureHeight=NaN,y.SetBackgroundColor(this.jsvMainView,this.style.backgroundColor,this.style.borderRadius)),this.style.backgroundImage&&(this.jsvStore.textureWidth=NaN,this.jsvStore.textureHeight=NaN,y.SetBackgroundImage(this.jsvMainView,this.style.backgroundImage,this.style.borderRadius))}},{key:"jsvFlushViewAnimation",value:function(){if(this.jsvAnimation&&this.jsvAnimation.Cancel(),this.style.animation){var e=document.jsvGetKeyFrames(this.style.animation.name);this.jsvAnimation=new h.CssKeyframeAnimation(e,this.style.animation.duration,this.style.animation.timingFunction,this.style.width?this.style.width:this.clientWidth,this.style.height),this.jsvAnimation.EnableDelay(this.style.animation.delay).SetRepeat(this.style.animation.iterationCount);var i=this,t=new h.AnimationListener;t.OnEnd(function(e){var t;i.jsvAnimation=null,e&&((t=new b("animationend")).target=i,document.dispatchEvent(t),null==i.instantSwapCallback&&(i.instantSwapCallback=h.sRenderBridge.InstantPerformSwap.bind(h.sRenderBridge)),Promise.resolve().then(i.instantSwapCallback))}),this.jsvAnimation.Enable(h.AnimationEnable.ReleaseAfterEndCallback),this.jsvAnimation.SetAnimationListener(t),this.jsvMaskView.StartAnimation(this.jsvAnimation)}}},{key:"jsvFlushViewTransition",value:function(){if(null!=this.jsvStore.transitionTmp&&this.jsvStore.transitionTmp.syncTimes!=p.cnt&&-1!=this.jsvStore.transitionTmp.syncTimes){var e=this.jsvStore.transition;this.jsvStore.transition=this.jsvStore.transitionTmp,this.jsvStore.transitionTmp=e,null!=this.jsvStore.transitionTmp&&(this.jsvStore.transitionTmp.syncTimes=-1)}if(this.style.transition){if(this.jsvStore.transition&&!this._JsvBuildTransition())return}else this.jsvAnimation&&(this.jsvAnimation.Cancel(),this.jsvAnimation=null);var t=this.jsvStore.transitionTmp;(t=t||{left:0,top:0,width:0,height:0,opacity:1,transform:null,syncTimes:-1}).left=this.style.left,t.top=this.style.top,t.width=this.style.width,t.height=this.style.height,t.opacity=this.style.opacity,t.transform=this.style.transform,t.syncTimes=p.cnt,this.jsvStore.transitionTmp=t}},{key:"_JsvBuildTransition",value:function(){var e=[];for(var t in this.style.transition){var i=this.jsvStore.transition[t],n=this.style[t];if(i!==n){var s=this.style.transition[t],r={name:t,dur:s.duration,tf:null,dly:s.delay,from:i,to:n};"transform"===t&&(r.origin=this.style.transformOrigin?this.style.transformOrigin:"center center"),s.timingFunction&&(r.tf=s.timingFunction.Pacakge()),e.push(r)}}if(e.length<=0)return!1;var o=this,a=new h.AnimationListener;return a.OnEnd(function(e){if(o.jsvAnimation=null,e){var t=new b("transitionend");t.target=o,document.dispatchEvent(t),null==o.instantSwapCallback&&(o.instantSwapCallback=h.sRenderBridge.InstantPerformSwap.bind(h.sRenderBridge)),Promise.resolve().then(o.instantSwapCallback)}}),this.jsvAnimation=new h.CssTransitionAnimation(e),this.jsvAnimation.SetAnimationListener(a),this.jsvMaskView.StartAnimation(this.jsvAnimation),!0}},{key:"clientWidth",get:function(){return isNaN(this.jsvStore.clientWidth)?this.style.width:this.jsvStore.clientWidth}},{key:"clientHeight",get:function(){return isNaN(this.jsvStore.clientHeight)?this.style.height:this.jsvStore.clientHeight}}],[{key:"applyObjectFitCommon",value:function(e,t,i){if(!i||isNaN(e.jsvStore.textureWidth)||isNaN(e.jsvStore.textureHeight))return null;var n=e.style.objectFit,s=i.ApplyObjectFit(t.width,t.height,e.jsvStore.textureWidth,e.jsvStore.textureHeight,n,E.ObjectFit);return 0!==t.width&&0!==t.height||0===t.width&&0===t.height||(e.jsvStore.clientWidth=Math.max(t.width,s.width),e.jsvStore.clientHeight=Math.max(t.height,s.height)),s}}]),n}();x.TAG={DIV:"DIV",IMAGE:"IMAGE",STYLE:"STYLE",AUDIO:"AUDIO",VIDEO:"VIDEO"},x.ATTRIBUTE={SRC:"src",JSVPREFIX:"jsv"};function P(e){v(this,P);var t=e.indexOf(P.KeyFramesFlag)+P.KeyFramesFlag.length,i=e.indexOf("{"),n=e.substring(t,i);this.name=n.trim(),this.cssText=e}var V=function(){o(s,x);var t=c(s);function s(){var e;return v(this,s),(e=t.call(this)).jsvContentView=null,e.jsvRefedImgTex=null,e.jsvVerticalAlign=null,e.jsvTextClassSynced=null,e}return r(s,[{key:"jsvOnLoadForgeView",value:function(){this.style.borderImage&&(this.jsvMaskView=new h.NinePatchView),u(a(s.prototype),"jsvOnLoadForgeView",this).call(this)}},{key:"jsvOnUnloadForgeView",value:function(){u(a(s.prototype),"jsvOnUnloadForgeView",this).call(this),y.UnrefImgTexSize(this.jsvRefedImgTex),this.jsvRefedImgTex=null}},{key:"jsvOnStyleChanged",value:function(e){u(a(s.prototype),"jsvOnStyleChanged",this).call(this,e);var t=!!e[E.TYPE.FOREGROUND];e[E.TYPE.LAYOUT_SIZE]&&(t||this.jsvFlushViewForeground()),e[E.TYPE.FOREGROUND]&&this.jsvFlushViewForeground(),e[E.TYPE.BORDER]&&this.jsvFlushViewBorder()}},{key:"jsvFlushViewForeground",value:function(){var i=this;if(this.jsvContentView&&(this.jsvContentView.ClearViews(),this.jsvStore.textContent)){var e=void 0===this.style.height||0==this.style.height,t=e?function(e,t){i.jsvStore.clientHeight=e.height}:null,n=this.jsvBuildTextView(t);e&&n.EnableAutoHeight();var s=n.GetLayoutView();this.jsvContentView.AddView(s)}}},{key:"jsvBuildTextView",value:function(e){var t=null,i=null!=this.style.jsvTextClassRef;if(i&&this.jsvCanUseTextViewCache()){var n=this.style.width,s=this.style.height;void 0===n&&(n=this.clientWidth),void 0===s&&(s=0),t=new h.CopiedTextViewEx(y.TextureManager,this.jsvStore.textContent,{width:n,height:s},this.style.jsvTextClassRef.getAttach().cachedSet,e)}else{var r=this.jsvGetTextParams();i&&!this.style.jsvTextClassRef.getAttach().hasOwnProperty("cachedSet")?(r.EnableDuplicateBuilder(),t=new h.TextViewEx(y.TextureManager,r,this.jsvStore.textContent,!0,e),this.style.jsvSaveTextCachedSet(t.GetDuplicateBuilder()),this.style.jsvTextClassRef.getAttach().jsvAttr={jsvVerticalAlign:this.jsvVerticalAlign}):t=new h.TextViewEx(y.TextureManager,r,this.jsvStore.textContent,!0,e)}return t}},{key:"jsvCanUseTextViewCache",value:function(){var e=this.style.jsvTextClassRef.getAttach();return!!e.hasOwnProperty("cachedSet")&&(e.jsvAttr.jsvVerticalAlign!==this.jsvVerticalAlign?(this.style.jsvTextClassRef.fallbackMode("jsv_text_vertical_align"),!1):this.style.jsvCheckTextStyleChange())}},{key:"jsvFlushViewBorder",value:function(){if(this.jsvMaskView)if(this.style.clipPath)console.error("BorderImage is conflicting with ClipPath.");else if(this.style.borderImage){var e=S.ConvertPx(this.getAttribute("jsv-borderimage-width")),t=S.ConvertPx(this.getAttribute("jsv-borderimage-height"));if(y.UnrefImgTexSize(this.jsvRefedImgTex),!this.jsvRefedImgTex||this.jsvRefedImgTex.Source!==this.style.borderImage.source.href){var i=e&&t?{width:e,height:t}:null;this.jsvRefedImgTex=y.TextureManager.GetImage2(this.style.borderImage.source.href,!1,i,h.ColorSpace.RGBA_8888)}e&&t&&(console.log("Custom cache image size with: "+e+"/"+t),y.SetImgTexSize(this.jsvRefedImgTex,{width:e,height:t})),y.RefImgTexSize(this.jsvRefedImgTex,function(e){var t=this.style.borderImageOutset?this.style.borderImageOutset:S.ConvertRect();this.jsvMaskView.SetPadding({start:t.left,width:e.width-t.left-t.right},{start:t.top,width:e.height-t.top-t.bottom});var i=this.style.borderImage.slice;this.jsvMaskView.SetRepeat([{start:i.left,width:e.width-i.left-i.right}],[{start:i.top,width:e.height-i.top-i.bottom}]);var n=new h.ExternalTextureSetting(this.jsvRefedImgTex);this.jsvMaskView.ResetTexture(n)}.bind(this))}}},{key:"setAttribute",value:function(e,t){if(!this.jsvTakeTextAttribute(e,t)&&(u(a(s.prototype),"setAttribute",this).call(this,e,t),"class"===e&&null!=this.style.jsvTextClassRef&&this.style.jsvTextClassRef.getName()!==this.jsvTextClassSynced)){var i=this.style.jsvTextClassRef.getTextJsvAttributes();for(var n in i)n.startsWith("jsv_text_")&&this.jsvTakeTextAttribute(n,i[n]);this.jsvTextClassSynced=this.style.jsvTextClassRef.getName()}}},{key:"jsvTakeTextAttribute",value:function(e,t){return"jsv_text_vertical_align"===e&&(this.jsvVerticalAlign=t,!0)}},{key:"jsvGetTextParams",value:function(){var e={textOverflow:this.style.textOverflow?this.style.textOverflow:"clip",wordWrap:"break-word"===this.style.wordWrap?"break_word":"normal"};"nowrap"===this.style.whiteSpace&&(e.wordWrap="none");var t={textColor:this.style.color,font:this.style.fontFamily,size:this.style.fontSize,italic:"italic"===this.style.fontStyle,bold:"bold"===this.style.fontWeight,hAlign:this.style.textAlign?this.style.textAlign:"left",vAlign:this.style.lineHeight?"middle":"top",vAreaAlign:this.jsvVerticalAlign?this.jsvVerticalAlign:"top"},i=this.style.textShadow?this.style.textShadow.split(" "):void 0;i&&(t.shadow={shadowOffsetX:parseInt(i[0]),shadowOffsetY:parseInt(i[1]),shadowBlur:parseInt(i[2]),shadowColor:i[3]});var n=this.style.fontSize?1.3*this.style.fontSize:14;this.style.lineHeight&&(n=this.style.lineHeight);var s=new h.TextViewParams;s.SetTextAttr(e),s.SetFontStyle(t),s.SetLineHeight(n);var r=this.style.width;return void 0===r&&(r=this.clientWidth),s.SetViewSize(new h.RectArea(0,0,r,this.style.height)),s}},{key:"textContent",get:function(){return this.jsvStore.textContent},set:function(e){this.jsvStore.textContent=e,this.jsvStore.clientWidth=NaN,this.jsvContentView||(this.jsvContentView=new h.LayoutView,this.jsvMainView.AddView(this.jsvContentView)),this.parentElement&&this.jsvFlushViewForeground()}},{key:"clientWidth",get:function(){var e=this.style.width;if(e||0===e)return e;if(this.jsvStore.textContent){if(!isNaN(this.jsvStore.clientWidth))return this.jsvStore.clientWidth;var t={str:this.jsvStore.textContent,font:this.style.fontFamily,size:this.style.fontSize,italic:this.style.fontStyle,bold:this.style.fontWeight};return this.jsvStore.clientWidth=y.GetTextWidth(t),this.jsvStore.clientWidth}return u(a(s.prototype),"clientWidth",this)}}]),s}(),A=function(){o(i,s);var t=c(i);function i(e){return v(this,i),t.call(this,"load")}return i}(),_=function(){o(n,x);var i=c(n);function n(e){var t;return v(this,n),(t=i.call(this,e)).jsvImageView=new h.LayoutView(null,"img"),t.jsvMainView.AddView(t.jsvImageView),t._ImageInLoading=!1,t.jsvColorSpace=h.ColorSpace.RGBA_8888,t.jsvScaleDownTex=null,t}return r(n,[{key:"setAttribute",value:function(e,t){this.jsvTakeTextureAttribute(e,t)?console.assert(!this._ImageInLoading,"set ".concat(e," after src")):(u(a(n.prototype),"setAttribute",this).call(this,e,t),e===x.ATTRIBUTE.SRC&&(this._ImageInLoading=!0,this.jsvStore.textureWidth=NaN,this.jsvStore.textureHeight=NaN,y.SetBackgroundImage(this.jsvImageView,t,this.style.borderRadius,this.jsvOnLoaded.bind(this),this.jsvScaleDownTex,this.jsvColorSpace)))}},{key:"jsvTakeTextureAttribute",value:function(e,t){return"jsv_img_color_space"==e?(this.jsvColorSpace=t,!0):"jsv_img_scaledown_tex"==e&&(this.jsvScaleDownTex=t,!0)}},{key:"jsvFlushViewLayout",value:function(){this._ImageInLoading?this.jsvImageView.WaitTextureToResize(!0):this.jsvImageView.WaitTextureToResize(!1),u(a(n.prototype),"jsvFlushViewLayout",this).call(this)}},{key:"jsvFlushViewBackground",value:function(){this.getAttribute(x.ATTRIBUTE.SRC)}},{key:"jsvOnLoaded",value:function(e){this._ImageInLoading=!1,this.jsvStore.textureWidth=e.width,this.jsvStore.textureHeight=e.height,this.style.jsvLazySyncCache.setCacheProperty(E.TYPE.LAYOUT_SIZE,void 0);var t=new A;t.target=this,document.dispatchEvent(t)}},{key:"jsvOnLoadForgeView",value:function(){this.style.objectFit||this.style.setDefaultValueBeforeForgeViewLoad("objectFit",E.ObjectFit.FILL),u(a(n.prototype),"jsvOnLoadForgeView",this).call(this)}},{key:"jsvApplyObjectFit",value:function(e){return x.applyObjectFitCommon(this,e,this.jsvImageView)}}]),n}();P.KeyFramesFlag="@keyframes";var M=function(){function t(e){v(this,t),this.jsvCssRules=null,this.jsvTextContent=e}return r(t,[{key:"insertRule",value:function(e,t){if(void 0===t&&(t=this.jsvCssRules.length),e.indexOf(P.KeyFramesFlag)<0)throw Error("StyleSheet.insertRule() Rule is not supported except keyframes.");var i=new P(e);this.jsvCssRules.splice(t,0,i)}},{key:"deleteRule",value:function(e){this.jsvCssRules.splice(e,1)}},{key:"cssRules",get:function(){if(this.jsvCssRules)return this.jsvCssRules;if(this.jsvCssRules=new Array,this.jsvTextContent.indexOf(P.KeyFramesFlag)<0)return this.jsvCssRules;var e=this.jsvTextContent.split(P.KeyFramesFlag);for(var t in e)0!=t&&this.insertRule(P.KeyFramesFlag+e[t]);return this.jsvCssRules}}]),t}(),N=function(){o(n,x);var i=c(n);function n(e){var t;return v(this,n),(t=i.call(this,e)).textContent=null,t}return r(n,[{key:"appendChild",value:function(e){u(a(n.prototype),"appendChild",this).call(this,e);var t=new M(e.textContent);document.jsvAppendStyleSheet(t)}},{key:"removeChild",value:function(e){throw u(a(n.prototype),"removeChild",this).call(this,e),Error("Failed to removeChild, unimplement!.")}}]),n}(),L=function(){o(n,x);var i=c(n);function n(e){var t;return v(this,n),(t=i.call(this)).jsvMediaView=null,t.jsvMedia=null,e&&(t.src=e),t}return r(n,[{key:"addEventListener",value:function(e,t,i){u(a(n.prototype),"addEventListener",this).call(this,e,t,i),this.jsvAddMediaListener(e)}},{key:"jsvOnLoaded",value:function(){this.jsvMediaView=new h.LayoutView,this.jsvMediaView.RegisterDetachCallback(this.jsvOnUnloadForgeView.bind(this)),this.jsvMainView.AddView(this.jsvMediaView)}},{key:"jsvOnLoadForgeView",value:function(){console.log("MediaElement jsvOnLoadForgeView"),u(a(n.prototype),"jsvOnLoadForgeView",this).call(this),this.jsvMedia||this.jsvInit()}},{key:"jsvOnUnloadForgeView",value:function(){console.log("MediaElement jsvOnUnloadForgeView"),this.jsvMediaView&&(this.jsvMediaView.UnregisterDetachCallback(),this.jsvMediaView=null),u(a(n.prototype),"jsvOnUnloadForgeView",this).call(this),this.jsvRelease()}},{key:"jsvInit",value:function(){var e=this.jsvEventListener;if(e)for(var t in e.keys)this.jsvAddMediaListener(t)}},{key:"jsvRelease",value:function(){this.jsvMedia&&(this.jsvMedia.pause(),this.jsvMedia.unload&&this.jsvMedia.unload(),this.jsvMedia.releaseResource&&(this.jsvMedia.releaseResource(),this.jsvMedia.onPlatformDestroy())),this.jsvEventListener=null}},{key:"jsvAddMediaListener",value:function(t){var i=this;this.jsvMedia||this.jsvInit(),this.jsvMedia.addEventListener(t,function(){var e=new s(t);e.target=i,u(a(n.prototype),"dispatchEvent",i).call(i,e)})}},{key:"src",set:function(e){e=e&&new f(e).href;this.jsvMedia||this.jsvInit(),e!==this.jsvMedia.src&&(this.jsvMedia.src=e)}}]),n}();for(var F in L.HOOKS={Audio:Audio,Video:OffscreenVideoPlayer},L.PROP={SetOnly:["autoplay","loop","timeupdateless"],GetOnly:["duration","paused"],SetAndGet:["currentTime","muted","playbackRate","preload","volume"],Function:["load","pause","play","unload"]},L.PROP){var U,D=w(L.PROP[F]);try{var W=function(){var t=U.value,e={};"SetOnly"!==F&&"SetAndGet"!==F||(e.set=function(e){this.jsvMedia||this.jsvInit(),this.jsvMedia[t]=e}),"GetOnly"!==F&&"SetAndGet"!==F||(e.get=function(){return this.jsvMedia||this.jsvInit(),this.jsvMedia[t]}),"Function"===F&&(e=function(){var e;return this.jsvMedia||this.jsvInit(),this.jsvMedia[t]?(e=this.jsvMedia)[t].apply(e,arguments):null}),e instanceof Function?L.prototype[t]=e:Object.defineProperty(L.prototype,t,e)};for(D.s();!(U=D.n()).done;)W()}catch(e){D.e(e)}finally{D.f()}}var B=function(){o(n,L);var i=c(n);function n(e){var t;return v(this,n),t=i.call(this,e),console.log("AudioElement.constructor()",l(t)),t}return r(n,[{key:"jsvInit",value:function(){this.jsvMedia=new L.HOOKS.Audio,u(a(n.prototype),"jsvInit",this).call(this),this.jsvOnLoaded()}},{key:"jsvRelease",value:function(){u(a(n.prototype),"jsvRelease",this).call(this),this.jsvMedia=null}}]),n}(),H=function(){o(s,L);var i=c(s);function s(e){var t;return v(this,s),t=i.call(this,e),console.log("VideoElement.constructor()",l(t)),t}return r(s,[{key:"jsvOnStyleChanged",value:function(e){u(a(s.prototype),"jsvOnStyleChanged",this).call(this,e),e[E.TYPE.LAYOUT_SIZE]&&this.jsvFlushVideoView()}},{key:"jsvFlushVideoView",value:function(){this.jsvMediaView&&(this.jsvStore.textureWidth=this.jsvMedia.videoWidth,this.jsvStore.textureHeight=this.jsvMedia.videoHeight,this.style.jsvLazySyncCache.setCacheProperty(E.TYPE.LAYOUT_SIZE,void 0))}},{key:"jsvApplyObjectFit",value:function(e){return x.applyObjectFitCommon(this,e,this.jsvMediaView)}},{key:"jsvInit",value:function(){this.jsvMedia=new L.HOOKS.Video,this.addEventListener("load",this.jsvOnLoaded.bind(this)),u(a(s.prototype),"jsvInit",this).call(this)}},{key:"jsvRelease",value:function(){u(a(s.prototype),"jsvRelease",this).call(this),this.jsvMedia=null}},{key:"jsvOnLoaded",value:function(){if(u(a(s.prototype),"jsvOnLoaded",this).call(this),this.jsvMediaView){var e,t=y.TextureManager.GetOffScreenMediaTexture(this.jsvMedia),i=this.style.borderRadius;i&&(e=new h.ViewRoundCornerMask(i.topLeft,i.topRight,i.bottomLeft,i.bottomRight));var n=new h.TextureSetting(t,e);this.jsvMediaView.ResetTexture(n)}this.jsvFlushVideoView()}},{key:"jsvOnLoadForgeView",value:function(){this.style.objectFit&&this.style.setDefaultValueBeforeForgeViewLoad("objectFit",E.ObjectFit.CONTAIN),u(a(s.prototype),"jsvOnLoadForgeView",this).call(this)}}]),s}();for(var G in H.PROP={SetOnly:[],GetOnly:["videoHeight","videoWidth"],SetAndGet:["height","poster","width"]},H.PROP){var z,Y=w(H.PROP[G]);try{var J=function(){var t=z.value,e={};"SetOnly"!==G&&"SetAndGet"!==G||(e.set=function(e){this.media[t]=e}),"GetOnly"!==G&&"SetAndGet"!==G||(e.get=function(){return this.media[t]}),H.prototype[t]=e};for(Y.s();!(z=Y.n()).done;)J()}catch(e){Y.e(e)}finally{Y.f()}}var K=function(){function e(){v(this,e),this.src=null,this.onerror=null,this.onload=null,this.charset=null,this.timeout=120}return r(e,[{key:"setAttribute",value:function(e,t){console.log("ScriptElement.setAttribute() name="+e+", value=",t),this[e]=t}},{key:"jsvActiveScript",value:function(){if(null!=this.src){var e=new f(this.src);console.log("TestUrl load script with src="+this.src+" url="+e),console.log("load script with url="+e.href);var i=this;window.JsView.runJsWithUrl(e.href,!1,function(e,t){i.onLoadResult(e,t)})}}},{key:"onLoadResult",value:function(e,t){console.log("onLoadResult "+e+" "+t),e?this.onload&&this.onload():this.onerror&&this.onerror({type:"jsvErr_"+t,target:this})}}]),e}(),X=function(){o(i,x);var t=c(i);function i(){var e;return v(this,i),e=t.call(this),console.warn("Warnig: <a> is fake in JsView system"),e.href="",e.protocol="",e.host="",e.search="",e.hash="",e.hostname="",e.port="",e.pathname="",e}return i}(),Z=function(){o(t,x);var e=c(t);function t(){return v(this,t),e.apply(this,arguments)}return t}(),q=function(){o(n,x);var i=c(n);function n(e){var t;return v(this,n),(t=i.call(this)).jsvMainView=new h.JsvElementView(e),t}return r(n,[{key:"setAttribute",value:function(e,t){u(a(n.prototype),"setAttribute",this).call(this,e,t),this.jsvMainView.setAttribute(e,t)}},{key:"removeAttribute",value:function(e){u(a(n.prototype),"removeAttribute",this).call(this,e),this.jsvMainView.removeAttribute(e)}},{key:"getAttribute",value:function(e){return this.jsvMainView.getAttribute(e)}},{key:"hasAttribute",value:function(e){return this.jsvMainView.hasAttribute(e)}},{key:"jsvOnStyleChanged",value:function(e){u(a(n.prototype),"jsvOnStyleChanged",this).call(this,e)}},{key:"textContent",get:function(){return this.jsvMainView.textContent},set:function(e){this.jsvMainView.textContent=e}}]),n}(),$=function(){o(n,m);var i=c(n);function n(e){var t;return v(this,n),(t=i.call(this,m.TEXT_NODE)).textContent=e,t}return n}(),Q=function(){function e(){v(this,e),console.log("Document header construct")}return r(e,[{key:"appendChild",value:function(e){e instanceof K&&(console.log("Found append script in head."),e.jsvActiveScript())}},{key:"removeChild",value:function(){console.warn("Failed to header.removeChild, unimplemented!.")}}]),e}(),ee=function(){o(i,m);var t=c(i);function i(){var e;return v(this,i),(e=t.call(this,m.DOCUMENT_NODE)).location=window.location,e.rootElement=new V,e.rootElement.ownerDocument=l(e),e.rootElement.id="root",e.activeElement=e.rootElement,e.cookie="",e.styleSheets=new Array,e.jsvIsReady=!1,e.head=new Q,e}return r(i,[{key:"createElement",value:function(e){switch(e){case i.DIV_ELEMENT:case i.FDIV_ELEMENT:return new V;case i.IMG_ELEMENT:case i.FIMG_ELEMENT:return new _;case i.STYLE_ELEMENT:return new N;case i.AUDIO_ELEMENT:return new B;case i.VIDEO_ELEMENT:return new H;case i.SCRIPT_ELEMENT:return console.log("Document.createElement() create script"),window.JsView?new K:window.originDocument.createElement("script");case i.ANCHOR_ELEMENT:return new X;default:return 0!==e.indexOf("jsv")||window.JsView?(console.warn("Document.createElement() unknown name="+e),new Z(e)):new q(e)}}},{key:"createTextNode",value:function(e){return new $(e)}},{key:"createEvent",value:function(e){return new s(e)}},{key:"getElementById",value:function(e){if("root"===e||"app"===e)return this.rootElement;throw Error("Document.getElementById() id="+e+" is UNIMPLEMENTED.")}},{key:"querySelector",value:function(e){if("head"===e||"#app"===e)return this.rootElement;throw Error("Document.querySelector() selectors="+e+" is UNIMPLEMENTED.")}},{key:"jsvAppendStyleSheet",value:function(e){document.styleSheets.push(e)}},{key:"jsvGetKeyFrames",value:function(e){var t,i=w(this.styleSheets);try{for(i.s();!(t=i.n()).done;){var n,s=w(t.value.cssRules);try{for(s.s();!(n=s.n()).done;){var r=n.value;if(r.name==e)return r.cssText}}catch(e){s.e(e)}finally{s.f()}}}catch(e){i.e(e)}finally{i.f()}var o,a="@keyframes ",l=a+e,c=w(this.styleSheets);try{for(c.s();!(o=c.n()).done;){var h=o.value,u=h.jsvTextContent,v=u.indexOf(l);if(!(v<0)){var d=u.indexOf("-keyframes",v+1),f=u.indexOf(a,v+1);f<0&&(f=u.length),0<d&&d<f&&(f=d);var y=u.substring(v,f);return h.insertRule(y,0),y}}}catch(e){c.e(e)}finally{c.f()}return null}},{key:"jsvUpdateRootElement",value:function(e){console.log("Document.jsvUpdateRootElement() this.jsvIsReady = true"),this.rootElement.jsvMainView=e,this.jsvIsReady=!0}}]),i}();if(ee.DIV_ELEMENT="div",ee.IMG_ELEMENT="img",ee.STYLE_ELEMENT="style",ee.VIDEO_ELEMENT="video",ee.AUDIO_ELEMENT="audio",ee.SCRIPT_ELEMENT="script",ee.ANCHOR_ELEMENT="a",ee.FIMG_ELEMENT="fimg",ee.FDIV_ELEMENT="fdiv",window.JsView){console.log("Declare React Proxy.");var te=new f(window.JsView.getAppUrl(),!0);window.location.applyUrlInfo?window.location.applyUrlInfo(te):window.location=te,window.addEventListener=function(e,t){},window.document=new ee,window.navigator={userAgent:"ForgeReact"},window.HTMLIFrameElement=function(){}}window.Audio=B,window.Video=H,console.log("Using JsView React");var ie=function(){function n(){v(this,n)}return r(n,null,[{key:"_isUndefined",value:function(e,t){var i=void 0===t;return i&&console.error(e+" property is undefined!"),i}},{key:"_keyframesCheck",value:function(e,t){n._isUndefined(e,t)||t.indexOf("transform")<0&&t.indexOf("opacity")<0&&console.error("keyframes property is only support transform and opacity, value:",t)}},{key:"_objectFit",value:function(e,t){if(!n._isUndefined(e,t)){var i="fill contain cover none scale-down";i.indexOf(t)<0&&console.error(" objectFit is only support one of string["+i+"]")}}},{key:"_clipPathCheck",value:function(e,t){n._isUndefined(e,t)||t.startsWith("inset")||console.error("clipPath property is support inset only.")}},{key:"_transitionOtherCheck",value:function(e,t){n._isUndefined(e,t)||console.error(e+" property is not support, you can use transition property, e.g. transition='width 2s'")}},{key:"_transitionCheck",value:function(e,t){n._isUndefined(e,t)}},{key:"_transformCheck",value:function(e,t){n._isUndefined(e,t)||0<t.length&&t.indexOf("translate3d")<0&&t.indexOf("scale3d")<0&&t.indexOf("rotate3d")<0&&t.indexOf("skew")<0&&console.error("transform property's value only support translate3d、scale3d、rotate3d、skew, value:",t)}},{key:"_transformOriginCheck",value:function(e,t){n._isUndefined(e,t)||0<t.length&&t.indexOf("%")<0&&t.indexOf("left")<0&&t.indexOf("center")<0&&t.indexOf("top")<0&&t.indexOf("right")<0&&t.indexOf("bottom")<0&&console.error("transformOrigin property's value only support XX%、left、top、right, bottom:",t)}},{key:"_textOverflowCheck",value:function(e,t){if(!n._isUndefined(e,t))switch(t){case"clip":case"ellipsis":break;default:console.error("textOverflow property's value is not support, value:",t)}}},{key:"_whiteSpaceCheck",value:function(e,t){if(!n._isUndefined(e,t))switch(t){case"normal":case"nowrap":break;default:console.error("whiteSpace property's value is not support, value:",t)}}},{key:"_textAlignCheck",value:function(e,t){if(!n._isUndefined(e,t))switch(t){case"left":case"right":case"center":break;default:console.error("textAlign property's value is not support, value:",t)}}},{key:"_lineHeightCheck",value:function(e,t){if(!n._isUndefined(e,t))switch(t){case"normal":case"inherit":console.error("lineHeight property's value is support number only, value:",t);break;default:0<=t.indexOf("%")&&console.error("lineHeight property's value is support number only, value:",t)}}},{key:"_colorCheck",value:function(e,t){n._isUndefined(e,t)||0===t.indexOf("rgba")||(0===t.indexOf("#")?7!==t.length&&console.error("backgroundColor property value's length is not valid, value:",t):console.error("color property value is not valid, need startwith rgba or #, value:",t))}},{key:"_visibilityCheck",value:function(e,t){n._isUndefined(e,t)||"visible"!==t&&"hidden"!==t&&"inherit"!==t&&console.error("visibility property's value is not support, value:",t)}},{key:"_displayCheck",value:function(e,t){n._isUndefined(e,t)||"block"!==t&&"inline"!==t&&"none"!==t&&"inline-block"!==t&&"inherit"!==t&&""!==t&&console.error("display property's value is not support, value:",t)}},{key:"_overflowCheck",value:function(e,t){n._isUndefined(e,t)||"visible"!==t&&"hidden"!==t&&console.error("overflow property's value is support visible or hidden only, value:",t)}},{key:"_topCheck",value:function(e,t){if(!n._isUndefined(e,t))switch(t){case"auto":case"inherit":console.error("top property's value is support number only, value:",t);break;default:0<=t.indexOf("%")&&console.error("top property's value is support number only, value:",t)}}},{key:"_leftCheck",value:function(e,t){if(!n._isUndefined(e,t))switch(t){case"auto":case"inherit":console.error("left property's value is support number only, value:",t);break;default:0<=t.indexOf("%")&&console.error("left property's value is support number only, value:",t)}}},{key:"_heightCheck",value:function(e,t){if(!n._isUndefined(e,t))switch(t){case"auto":case"inherit":console.error("height property's value is support number only, value:",t);break;default:0<=t.indexOf("%")&&console.error("height property's value is support number only, value:",t)}}},{key:"_widthCheck",value:function(e,t){if(!n._isUndefined(e,t))switch(t){case"auto":case"inherit":console.error("width property's value is support number only, value:",t);break;default:0<=t.indexOf("%")&&console.error("width property's value is support number only, value:",t)}}},{key:"_backfaceVisibility",value:function(e,t){if(!n._isUndefined(e,t))switch(t){case"visible":case"hidden":break;default:console.error("backfaceVisibility property's value is support visible/hidden only, value: ",t)}}},{key:"_perspectiveCheck",value:function(e,t){n._isUndefined(e,t)}},{key:"_zIndexCheck",value:function(e,t){n._isUndefined(e,t)||isNaN(t)&&console.error("zIndex property's value is support number only, value: ",t)}},{key:"_fontSizeCheck",value:function(e,t){if(!n._isUndefined(e,t))switch(t){case"smaller":case"larger":case"inherit":case"x-small":case"xx-small":case"small":case"large":case"medium":case"x-large":case"xx-large":console.error("fontSize property's value is support number only, value:",t);break;default:0<=t.indexOf("%")&&console.error("fontSize property's value is support number only, value:",t)}}},{key:"_fontWeightCheck",value:function(e,t){n._isUndefined(e,t)||"bold"!==t&&console.error("fontWeight property's value is support bold only, value:",t)}},{key:"_fontStyleCheck",value:function(e,t){n._isUndefined(e,t)||"italic"!==t&&console.error("fontWeight property's value is support italic only, value:",t)}},{key:"_borderRadiusCheck",value:function(e,t){n._isUndefined(e,t)||4<t.split(" ").length&&console.error("borderRadius property's value is not support, value:",t)}},{key:"_borderImageWidthCheck",value:function(e,t){n._isUndefined(e,t)}},{key:"_borderImageOutsetCheck",value:function(e,t){n._isUndefined(e,t)||4<t.split(" ").length&&console.error("borderImageOutsetCheck property's value is not support, value:",t)}},{key:"_borderImageCheck",value:function(e,t){n._isUndefined(e,t)||t.indexOf("fill")<0&&console.error("borderImage property's value is not contain fill, e.g. source slice, but value:",t)}},{key:"_backgroundOtherCheck",value:function(e){console.error(e+" property not support, you can use backgroundImage property, e.g. backgroundImage=`url(${iconImgPath})`")}},{key:"_backgroundImageCheck",value:function(e,t){n._isUndefined(e,t)||"inherit"==t&&console.error("backgroundImage property's value is not support, value:",t)}},{key:"_backgroundColorCheck",value:function(e,t){n._isUndefined(e,t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")||(0===t.indexOf("#")?7!==t.length&&console.error("backgroundColor property value's length is not valid, value:",t):console.error("backgroundColor property value is not valid, need startwith rgba or #, value:",t))}},{key:"_animationCheck",value:function(){}},{key:"_animationOtherNotSupport",value:function(e){console.error(e+" property is not support, you can use animation property, e.g. animation='mymove 5s infinite'")}},{key:"_transformStyleCheck",value:function(e,t){if(!n._isUndefined(e,t))switch(t){case"flat":case"preserve-3d":break;default:console.error("transformStyle property value is not valid",t)}}},{key:"_perspectiveOriginCheck",value:function(e,t){n._isUndefined(e,t)||0<t.length&&t.indexOf("%")<0&&t.indexOf("left")<0&&t.indexOf("center")<0&&t.indexOf("top")<0&&t.indexOf("right")<0&&t.indexOf("bottom")<0&&console.error("perspectiveOrigin property's value only support XX%、left、top、right, bottom:",t)}},{key:"get",value:function(e){return n.ValidStyleMap[e]}}]),n}();ie.ValidStyleMap={animation:{check:ie._animationCheck.bind(ie)},animationName:{check:ie._animationOtherNotSupport.bind(ie)},animationDuration:{check:ie._animationOtherNotSupport.bind(ie)},animationTimingFunction:{check:ie._animationOtherNotSupport.bind(ie)},animationDelay:{check:ie._animationOtherNotSupport.bind(ie)},animationIterationCount:{check:ie._animationOtherNotSupport.bind(ie)},animationDirection:{check:ie._animationOtherNotSupport.bind(ie)},animationPlayState:{check:ie._animationOtherNotSupport.bind(ie)},animationFillMode:{check:ie._animationOtherNotSupport.bind(ie)},background:{check:ie._backgroundOtherCheck.bind(ie)},backgroundColor:{check:ie._backgroundColorCheck.bind(ie)},backgroundImage:{check:ie._backgroundImageCheck.bind(ie)},borderImage:{check:ie._borderImageCheck.bind(ie)},borderImageOutset:{check:ie._borderImageOutsetCheck.bind(ie)},borderImageWidth:{check:ie._borderImageWidthCheck.bind(ie)},borderRadius:{check:ie._borderRadiusCheck.bind(ie)},height:{check:ie._heightCheck.bind(ie)},width:{check:ie._widthCheck.bind(ie)},zIndex:{check:ie._zIndexCheck.bind(ie)},fontFamily:{check:null},fontSize:{check:ie._fontSizeCheck.bind(ie)},fontStyle:{check:ie._fontStyleCheck.bind(ie)},fontWeight:{check:ie._fontWeightCheck.bind(ie)},left:{check:ie._leftCheck.bind(ie)},overflow:{check:ie._overflowCheck.bind(ie)},top:{check:ie._topCheck.bind(ie)},visibility:{check:ie._visibilityCheck.bind(ie)},display:{check:ie._displayCheck.bind(ie)},color:{check:ie._colorCheck.bind(ie)},lineHeight:{check:ie._lineHeightCheck.bind(ie)},textAlign:{check:ie._textAlignCheck.bind(ie)},whiteSpace:{check:ie._whiteSpaceCheck.bind(ie)},textOverflow:{check:ie._textOverflowCheck.bind(ie)},transform:{check:ie._transformCheck.bind(ie)},transformOrigin:{check:ie._transformOriginCheck.bind(ie)},transition:{check:ie._transitionCheck.bind(ie)},transitionProperty:{check:ie._transitionOtherCheck.bind(ie)},transitionDuration:{check:ie._transitionOtherCheck.bind(ie)},transitionTimingFunction:{check:ie._transitionOtherCheck.bind(ie)},transitionDelay:{check:ie._transitionOtherCheck.bind(ie)},clipPath:{check:ie._clipPathCheck.bind(ie)},keyframes:{check:ie._keyframesCheck.bind(ie)},objectFit:{check:ie._objectFit.bind(ie)},perspective:{check:ie._perspectiveCheck.bind(ie)},backfaceVisibility:{check:ie._backfaceVisibility.bind(ie)},transformStyle:{check:ie._transformStyleCheck.bind(ie)},perspectiveOrigin:{check:ie._perspectiveCheck.bind(ie)}};var ne=new ee;window.document.createElement=ne.createElement.bind(ne),window.document.createTextNode=ne.createTextNode.bind(ne),window.document.getElementById=ne.getElementById.bind(ne),window.document.querySelector=ne.querySelector.bind(ne),window.document.createEvent=ne.createEvent.bind(ne),console.log("Hook Document ..."),window.document.dispatchEvent=ne.dispatchEvent.bind(ne),window.document.jsvAppendStyleSheet=function(e){var t=window.originDocument.createElement("style");t.type="text/css",t.innerHTML=e.jsvTextContent,this.getElementsByTagName("Head")[0].appendChild(t)},window.document.jsvGetKeyFrames=function(e){for(var t="",i=document.styleSheets,n=0;n<i.length;++n){var s=i[n];if(s.cssRules)for(var r=0;r<s.cssRules.length;++r){var o=s.cssRules[r];if(o&&o.name===e){t=o.cssText;break}}}return t&&document.jsvCheckStyleFormat&&document.jsvCheckStyleFormat("keyframes",t),t};var se=window.navigator.userAgent.toLowerCase();window.jsvInAndroidWebView=0<=se.indexOf("android"),window.jsvInAndroidWebView?window.document.jsvCheckStyleFormat=null:window.document.jsvCheckStyleFormat=function(e,t){var i=ie.get(e);i?i.check&&t&&i.check(e,t):console.error(e+" property is not support.")},y.TextureManager=new h.TextureManager,y.RootView=new h.RootView,ne.jsvUpdateRootElement(y.RootView),h.sRenderBridge.AddWillSwapListener("forgeSwap",function(){g.SyncAllCachedProperty(),y.ClearUnusedTexSize()}),console.log("Using JsView HTML hook")});
